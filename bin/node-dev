#!/usr/bin/env node

var supervise = require('../lib/supervise')
  , args = process.argv.slice(2)

if (!args.length) {
  try {
    var json = JSON.parse(fs.readFileSync('./package.json', 'utf8'))
    if (!json.main) {
      console.log('Error: package.json does not specify a "main" script.')
      throw new Error()
    }
    args.push(json.main)
  }
  catch (err) {
    console.log('Usage: node-dev [options] script [arguments]\n')
    process.exit(1)
  }
}

supervise(args)
